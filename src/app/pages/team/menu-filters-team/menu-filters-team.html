<div class="filters-container"> 
    <div class="filters-scroll">

         <div class="mf-search">
    <h4>Search by name</h4>
    <input type="text" placeholder="Buscar..." [(ngModel)]="searchText" (ngModelChange)="onSearchChange($event)" />
  </div>


  <div class="mf-section" *ngIf="departments?.length">
      <div class="mf-section-header" (click)="toggleCollapse('departments')">
        <span class="caret" [class.open]="!isCollapsed('departments')">▶</span>
        <h4>Departments</h4>
      </div>
      <div class="mf-section-body" *ngIf="!isCollapsed('departments')">
        <label class="checkbox-item" *ngFor="let d of departments">
          <input type="checkbox" [checked]="selectedDepartments.includes(d.id)" (change)="toggleSelection(selectedDepartments, d.id)" /> {{d.name}}
        </label>
      </div>
    </div>


    <!-- POSITIONS FILTER -->
  <div class="mf-section" *ngIf="positions?.length">
    <div class="mf-section-header" (click)="toggleCollapse('positions')">
        <span class="caret" [class.open]="!isCollapsed('positions')">▶</span>
        <h4>Position</h4>
    </div>
    <div class="mf-section-body" *ngIf="!isCollapsed('positions')">
        <label class="checkbox-item" *ngFor="let  d of positions">
            <input type="checkbox" [checked]="selectedPositions.includes(d.id)" (change)="toggleSelection(selectedPositions, d.id)" /> {{d.name}}
        </label>
    </div>
    </div>


    <div class="mf-section" *ngIf="offices?.length">
      <div class="mf-section-header" (click)="toggleCollapse('offices')">
        <span class="caret" [class.open]="!isCollapsed('offices')">▶</span>
        <h4>Offices</h4>
      </div>
      <div class="mf-section-body" *ngIf="!isCollapsed('offices')">
        <label class="checkbox-item" *ngFor="let o of offices">
          <input type="checkbox" [checked]="selectedOffices.includes(o.id)" (change)="toggleSelection(selectedOffices, o.id)" /> {{o.name}}
        </label>
      </div>
    </div>

    <!-- ROLE FILTER -->

    <div class="mf-section" *ngIf="roles?.length">
      <div class="mf-section-header" (click)="toggleCollapse('roles')">
        <span class="caret" [class.open]="!isCollapsed('roles')">▶</span>
        <h4>Roles</h4>
      </div>
      <div class="mf-section-body" *ngIf="!isCollapsed('roles')">
        <label class="checkbox-item" *ngFor="let r of roles">
          <input type="checkbox" [checked]="selectedRoles.includes(r.id)" (change)="toggleSelection(selectedRoles, r.id)" /> {{r.name}}
        </label>
      </div>
    </div>


    <!-- STATE FILTER -->
    <div class="mf-section" *ngIf="states?.length">
        <div class="mf-section-header" (click)="toggleCollapse('states')">
            <span class="caret" [class.open]="!isCollapsed('states')">▶</span>
            <h4>States</h4>
        </div>
        <div class="mf-section-body" *ngIf="!isCollapsed('states')">
            <label class="checkbox-item" *ngFor="let s of states">
                <input type="checkbox" [checked]="selectedStates.includes(s.id)" (change)="toggleSelection(selectedStates, s.id)" /> {{s.name}}
            </label>  
        </div>
    </div>

    </div>
</div>
