<!-- ❌ No uses <html>, <head> ni <body> en un componente Angular -->

<!-- ✅ Coloca tus componentes de encabezado -->
<app-header></app-header>
<app-submenu></app-submenu>

<!-- ✅ Contenedor principal del TEAM -->
<div class="team-container">
  <h1>Equipo</h1>

  <!-- Búsqueda por nombre -->
  <div class="row">
    <div style="flex: 1 1 520px; min-width: 260px;">
      <label class="buscarname">Buscar por nombre</label>
      <input id="searchInput" type="text" placeholder="Ej: Carlos, Carlos Herrera" />
      <div class="muted">Búsqueda parcial, sin distinguir mayúsculas ni tildes. Filtra localmente.</div>
    </div>
  </div>

  <!-- Filtros combinables: Departamento, Puesto, Estado -->
  <div class="row">
    <div>
      <label class="departamento">Departamento</label>
      <select id="departmentFilter">
        <option value="">Todos</option>
      </select>
    </div>
    <div>
      <label class="puesto">Cargo</label>
      <select id="jobFilter">
        <option value="">Todos</option>
      </select>
    </div>
    <!-- NUEVO: Filtro por Oficina -->
    <div>
      <label class="oficina">Oficina</label>
      <select id="officeFilter">
        <option value="">Todas</option>
      </select>
    </div>
    <div>
      <label class="estado">Estado</label>
      <select id="stateFilter">
        <option value="">Todos</option>
      </select>
    </div>
    <!-- NUEVO: Filtro por Rol -->
    <div>
      <label class="rol">Rol</label>
      <select id="roleFilter">
        <option value="">Todos</option>
      </select>
    </div>

    <div class="spacer"></div>
    <div class="actions-toolbar">
      <button id="actualizardatos" type="button" class="secondary">Actualizar datos</button>
      <button id="limpiarfiltros" type="button" class="outline">Limpiar filtros</button>
      <div id="addMemberHost" class="add-host">
        <app-fagregar-miembro [catalogs]="catalogs" [allowedRoles]="allowedRoleOptions" (created)="refreshData()"></app-fagregar-miembro>
      </div>
    </div>
  </div>

  <div class="row">
    <span id="status" class="muted">Cargando empleados...</span>
    <span id="error" class="error" style="display:none;"></span>
  </div>

  <!-- NUEVO: Controles de paginación (tamaño de página y navegación) -->
  <div class="row">
    <div>
      <label class="mostrarpag">Mostrar por página</label>
      <select id="pageSize">
        <option value="10">10</option>
        <option value="20">20</option>
        <option value="30">30</option>
      </select>
    </div>
    <div class="spacer"></div>
    <div id="pagination" class="pagination"></div>
  </div>

  <!-- ✅ Resultados del equipo -->
<div id="results" class="results-grid">
  <div class="miembro-card" *ngFor="let miembro of empleados">
  <h3>{{ miembro.nombre }}</h3>
    <p><strong>Departamento:</strong> {{ miembro.departamento }}</p>
    <p><strong>Oficina:</strong> {{ miembro.oficina }}</p>
    <p><strong>Posición:</strong> {{ miembro.posicion }}</p>
    <p><strong>Rol:</strong> {{ miembro.rol }}</p>
    <p><strong>Tarifa:</strong> {{ miembro.tarifa }}</p>
    <p><strong>Estado:</strong> {{ miembro.estado }}</p>

   <!-- Botón editar -->
<button type="button" (click)="abrirModal(miembro)">✏️ Editar</button>

<!-- Modal -->
<app-editar-miembro
  *ngIf="mostrarModal"
  [miembro]="miembroSeleccionado"
  [catalogs]="catalogs"
  [allowedRoles]="allowedRoleOptions"
  (cerrar)="cerrarModal()"
  (guardar)="guardarCambios($event)">
</app-editar-miembro>

  </div>
</div>