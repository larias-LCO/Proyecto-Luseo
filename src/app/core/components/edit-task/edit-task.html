<div class="modal-backdrop" (click)="closeModal()"></div>

<div class="modal-container">
  <div class="modal-header">
    <!-- <span class="icon-title">âœï¸</span> -->
    <h2>Edit Task</h2>
    <button class="close-btn" (click)="closeModal()">âœ–</button>
  </div>

  <div class="modal-body-new">
    <form>

      <!-- Task name -->
      <div class="form-group full">
        <label>ğŸ“ Task Name *</label>
        <input type="text" [value]="task.name" readonly />
      </div>

      <!-- GRID 2 COLUMNS -->
      <div class="grid">

        <!-- Project Information -->
        <div>
          <h3 class="section-title">ğŸ“ Project Information</h3>

          <div class="form-group">
            <label>Project</label>
            <select [(ngModel)]="task.projectId" name="projectId" (change)="loadPhases(task.projectId)">
              <option *ngFor="let p of allProjects" [value]="p.id">{{ p.name }}</option>
            </select>
          </div>

          <div class="form-group">
            <label>Phase</label>
            <select [(ngModel)]="task.projectPhaseId" name="projectPhaseId" (change)="loadPhases(task.projectPhaseId)">
              <option *ngFor="let ph of projectPhaseId" [value]="ph.id">{{ ph.phase }}</option>
              <option value="None">None</option>
            </select>
          </div>

          <div class="form-group">
            <label>Category *</label>
            <select [(ngModel)]="task.taskCategoryId" name="taskCategoryId">
              <option *ngFor="let c of categories" [value]="c.id">{{ c.name }}</option>
            </select>
          </div>

        </div>

        <!-- Dates & Status -->
        <div>
          <h3 class="section-title">ğŸ“… Dates & Status</h3>

          <div class="form-group">
            <label>Issued Date</label>
            <input type="date" [(ngModel)]="task.issuedDate" name="issuedDate" />
          </div>

          <div class="form-group">
            <label>Status *</label>
            <select [(ngModel)]="task.status" name="status">
              <option value="IN_PROGRESS">In Progress</option>
              <option value="COMPLETED">Completed</option>
              <option value="PAUSED">Paused</option>
            </select>
          </div>

          <div class="form-group">
            <label>Created By</label>
            <div class="created-box">
              <span class="user-icon">ğŸ‘¤</span>
              <span *ngIf="task.createdByEmployeeId">{{ getEmployeeNameById(task.createdByEmployeeId) }}</span>
            </div>
          </div>



           <div id="edit-task-message" class="muted" style="text-align: center;">{{ message }}</div>

        </div>

      </div>

        <div class="description">
          <label><span class="icon">ğŸ“„</span>Description</label>
          <textarea [(ngModel)]="task.description" name="description"></textarea>
        </div>
    </form>
  </div>



  <!-- FOOTER -->
  <div class="modal-footer">
    <div class="actions">

      <!-- BotÃ³n para eliminar -->
      <button type="button" class="btn-delete" (click)="deleteTask()"><span class="icon">ğŸ—‘ï¸</span> Delete</button>
    <button type="button" class="cancel-btn" (click)="closeModal()"><span class="icon">âŒ</span> Cancel </button>

    <button type="button" class="save-btn" (click)="saveTask()"><span class="icon">ğŸ“</span> Save Changes</button>
    <!-- Modal de Ã©xito -->
    <div *ngIf="showSuccessModal" class="success-modal">
      <span>âœ… EdiciÃ³n exitosa</span>
    </div>
    
    </div>
  </div>
</div>

