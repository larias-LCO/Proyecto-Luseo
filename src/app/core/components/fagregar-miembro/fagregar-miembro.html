<!-- From Uiverse.io by andrew-demchenk0 --> 


<div class="tooltip">
<button type="button" class="button2" [style.color]="'#fff'" (click)="abrirModal()">
  <span class="button__text">Add New Member</span>
  <span class="button__icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" viewBox="0 0 24 24" stroke-width="2" stroke-linejoin="round" stroke-linecap="round" stroke="currentColor" height="24" fill="none" class="svg"><line y2="19" y1="5" x2="12" x1="12"></line><line y2="12" y1="12" x2="19" x1="5"></line></svg></span>
</button>
<span class="tooltip-text">Create a new member by assigning their data and corresponding role.</span>
</div>


<div class="modal-backdrop" *ngIf="mostrarModal">
  <div class="modal" [class.modal-small]="paso === 2">
    
    <div class="modal-header">
      <h1> <app-user-mas-icon [size]="32"></app-user-mas-icon>
        Add New Member
      </h1>
 <app-x-icon class="close-button" (click)="cerrarModal()" [size]="35" [color]="'red'">
  <div class="close">Close</div>
 </app-x-icon>
 
    </div>

    <div class="modal-body">
      <form [formGroup]="form">

    <!-- PASO 1 -->
     
    <div *ngIf="paso === 1" class="form-grid">
      <div class="form-control">
        <label > ğŸ‘¤ Name</label>
        <input type="text" placeholder="Name" formControlName="nombre"
          [ngClass]="{ 'input-error': form.get('nombre')?.invalid && form.get('nombre')?.touched }">
        <small *ngIf="form.get('nombre')?.invalid && form.get('nombre')?.touched">
          The name is required
        </small>
      </div>

      <!-- DEPARTAMENTO -->
      <div class="form-control">
        <label> ğŸ¢ Department</label>
        <select formControlName="departamento"
          [ngClass]="{ 'input-error': form.get('departamento')?.invalid && form.get('departamento')?.touched }">
          <option value="" disabled>Select a department</option>
          <option *ngFor="let d of (catalogs?.departments || [])" [value]="d?.name || d?.label || d?.title || d?.descripcion">{{ d?.name || d?.label || d?.title || d?.descripcion }}</option>
        </select>
        <small *ngIf="form.get('departamento')?.invalid && form.get('departamento')?.touched">
          Enter a valid department
        </small>
      </div>

<!-- OFICINA -->
<div class="form-control">
  <label > ğŸ“ Office</label>
  <select formControlName="oficina"
    [ngClass]="{ 'input-error': form.get('oficina')?.invalid && form.get('oficina')?.touched }">
    <option value="" disabled>Select an office</option>
    <option *ngFor="let o of (catalogs?.offices || [])" [value]="o?.name || o?.label || o?.title || o?.descripcion">{{ o?.name || o?.label || o?.title || o?.descripcion }}</option>
  </select>
  <small *ngIf="form.get('oficina')?.invalid && form.get('oficina')?.touched">
    Enter a valid office
  </small>
</div>

<!-- POSICIÃ“N -->
<div class="form-control">
  <label >ğŸ’¼ Job Position</label>
  <select formControlName="posicion"
    [ngClass]="{ 'input-error': form.get('posicion')?.invalid && form.get('posicion')?.touched }">
    <option value="" disabled>Select a position</option>
    <option *ngFor="let j of (catalogs?.jobs || [])" [value]="j?.name || j?.label || j?.title || j?.descripcion">{{ j?.name || j?.label || j?.title || j?.descripcion }}</option>
  </select>
  <small *ngIf="form.get('posicion')?.invalid && form.get('posicion')?.touched">
    Enter a valid position
  </small>
</div>

<!-- ROL -->
<div class="form-control">
  <label >ğŸ§‘â€ğŸ’¼ Role</label>
  <select formControlName="rol"
    [ngClass]="{ 'input-error': form.get('rol')?.invalid && form.get('rol')?.touched }">
    <option value="" disabled>Select a role</option>
  <option *ngFor="let r of filteredAllowedRoles" [value]="r">{{ r }}</option>
  </select>
  <small *ngIf="form.get('rol')?.invalid && form.get('rol')?.touched">
    The role is required
  </small>
</div>

      <!-- FIN LISTAS -->

      <div class="form-control">
        <label > ğŸª™ Billable Rate</label>
        <input type="number" placeholder="Billable Rate" formControlName="tarifa"
          [ngClass]="{ 'input-error': form.get('tarifa')?.invalid && form.get('tarifa')?.touched }">
        <small *ngIf="form.get('tarifa')?.invalid && form.get('tarifa')?.touched">
          Enter a valid rate
        </small>
      </div>
    </div>

    <!-- PASO 2 -->
     
    <div *ngIf="paso === 2" class="form-grid">
      <div class="form-control">
        <label >ğŸ‘¤ Username</label>
        <input type="text" placeholder="Username" formControlName="usuario"
          [ngClass]="{ 'input-error': form.get('usuario')?.invalid && form.get('usuario')?.touched }">
        <small *ngIf="form.get('usuario')?.invalid && form.get('usuario')?.touched">This field is required</small>
      </div>

      <div class="form-control">
        <label >âœ‰ï¸ Email</label>
        <input type="email" placeholder="Email" formControlName="correo"
          [ngClass]="{ 'input-error': form.get('correo')?.invalid && form.get('correo')?.touched }">
        <small *ngIf="form.get('correo')?.invalid && form.get('correo')?.touched">
          Enter a valid email
        </small>
      </div>

      <div class="form-control password-group">
        <label>ğŸ”’ Password</label>
        <input [type]="showPassword ? 'text' : 'password'" placeholder="Password" formControlName="password"
          [ngClass]="{ 'input-error': form.get('password')?.invalid && form.get('password')?.touched }">
        <button type="button" class="toggle-password" (click)="showPassword = !showPassword" tabindex="-1">
          <span *ngIf="!showPassword">ğŸ‘ï¸</span>
          <span *ngIf="showPassword">ğŸš«
</span>
        </button>
        <small *ngIf="form.get('password')?.invalid && form.get('password')?.touched">MÃ­nimo 6 caracteres</small>
      </div>
    </div>

    <!-- BOTONES -->
    <div class="acciones">
      <!-- <button class="cancelar" (click)="cerrarModal()">Cancel</button> -->
<button class="noselect" (click)="cerrarModal()"><span class="text" >Cancel</span></button>


      <!-- <button class="atras" *ngIf="paso === 2" (click)="atras()">AtrÃ¡s</button> -->
      <!-- From Uiverse.io by Jedi-hongbin --> 
<button class="atras" *ngIf="paso === 2" (click)="atras()">
 <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="icon icon-tabler icons-tabler-outline icon-tabler-arrow-left"><path stroke="none" d="M0 0h24v24H0z" fill="none"/><path d="M5 12l14 0" /><path d="M5 12l6 6" /><path d="M5 12l6 -6" /></svg>
  <div class="text">
    Back
  </div>
</button>



      <!-- <button class="siguiente" *ngIf="paso === 1" (click)="siguiente()">Siguiente</button> -->
<button class="next-button" *ngIf="paso === 1" (click)="siguiente()">
  <svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="currentColor" class="w-6 h-6">
    <path stroke-linecap="round" stroke-linejoin="round" d="M4.5 12h15m0 0l-6.75-6.75M19.5 12l-6.75 6.75"></path>
  </svg>
  <div class="text2">
    Next
  </div>

</button>


  
      <!-- <button class="agregar" *ngIf="paso === 2" (click)="agregar()">Create Member</button> -->
<button class="agregar" *ngIf="paso === 2" (click)="agregar()"> <span>Create Member</span>
</button>





        </div>
      </form>
      </div>

    <!-- Modal de Ã©xito -->
    <div *ngIf="showSuccessModal" class="success-modal">
      <div style="font-size:2.5rem;color:#10b981;">âœ”</div>
      <span> Miembro creado correctamente</span>
    </div>
<!-- <div *ngIf="showSuccessModal" class="success-modal" style="z-index:9999;background:rgba(0,0,0,0.18);display:flex;align-items:center;justify-content:center;">
    <div style="background:#fff;padding:32px 36px 28px 36px;border-radius:16px;box-shadow:0 2px 16px rgba(0,0,0,0.10);text-align:center;min-width:320px;max-width:90vw;">
        <div style="font-size:48px;color:#10b981;margin-bottom:8px;">âœ”ï¸</div>
        <div style="font-size:22px;font-weight:600;margin-bottom:8px;">Member created successfully!</div>
    </div>
</div> -->
  

