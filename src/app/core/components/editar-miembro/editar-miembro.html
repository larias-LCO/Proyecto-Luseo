<!-- Modal de éxito -->
<div *ngIf="showSuccessModal" class="success-modal">
  <span>✅ Cambios guardados correctamente</span>
</div>
<div class="editar-miembro-modal">
  <div class="modal-backdrop" (click)="cerrarModal()"></div>

  <div class="modal-container">
    <div class="modal-content" (click)="$event.stopPropagation()">

      <h2 class="modal-title">Editar Miembro</h2>

      

      <form [formGroup]="form" (ngSubmit)="guardarCambios()" class="form-grid">

        <!-- Columna izquierda / derecha (placeholders) -->
         <div>
         <label>Name</label>
        <input
          type="text"
          formControlName="nombre"
          placeholder="Nombre"
          class="form-input"
          autocomplete="off"/>
        </div>


        <div>
          <label >Department</label>
        <select formControlName="departamento" class="form-input">
          <option value="">Department</option>
          <option *ngFor="let d of catalogs.departments" [value]="d.name">{{ d.name }}</option>
        </select>
        </div>


        <div>
          <label>Office</label>
        <select formControlName="oficina" class="form-input">
          <option value="">Office</option>
          <option *ngFor="let o of catalogs.offices" [value]="o.name">{{ o.name }}</option>
        </select>
        </div>


        <div>
          <label>Job Position</label>
        <select formControlName="posicion" class="form-input">
          <option value="">Posición</option>
          <option *ngFor="let j of catalogs.jobs" [value]="j.name">{{ j.name }}</option>
        </select>
        </div>


        <div>
          <label>Rol</label>
        <select formControlName="rol" class="form-input">
          <option value="">Rol</option>
          <!-- Si el padre pasó allowedRoles ya filtrados, solo los mostramos; por seguridad, si ADMIN aparece OWNER lo deshabilitamos -->
          <option *ngFor="let r of allowedRoles" [value]="r" [disabled]="(r === 'OWNER') && isAdmin()">{{ r }}</option>
        </select>
        </div>

        <div>
          <label>Billable Rate</label>
        <input
          type="number"
          formControlName="tarifa"
          placeholder="Billable Rate"
          class="form-input"
          min="0"/>
        </div>


        <div>
          <label>Estate</label>
        <!-- Estado ocupa toda la fila -->
        <select formControlName="estado" class="form-input full-width">
          <option value="">State</option>
          <option value="ACTIVE">Active</option>
          <option value="INACTIVE">Inactive</option>
        </select>
        </div>

        <!-- Botones: full-width para alinear a la derecha -->
        <div class="modal-buttons full-width">
          <!-- <button type="button" class="btn-cancelar" (click)="cerrarModal()">Cancelar</button> -->
            <!-- From Uiverse.io by cssbuttons-io --> 

<button class="noselect" (click)="cerrarModal()"><span class="text" >Cancelar</span><span class="icon"><svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24"><path d="M24 20.188l-8.315-8.209 8.2-8.282-3.697-3.697-8.212 8.318-8.31-8.203-3.666 3.666 8.321 8.24-8.206 8.313 3.666 3.666 8.237-8.318 8.285 8.203z"></path></svg></span></button>




          <!-- <button type="submit" class="btn-guardar">Guardar cambios</button> -->

        <!-- From Uiverse.io by ilkhoeri --> 
<button class="action_has has_saved" aria-label="save" type="submit">
  <svg
    aria-hidden="true"
    xmlns="http://www.w3.org/2000/svg"
    width="20"
    height="20"
    stroke-linejoin="round"
    stroke-linecap="round"
    stroke-width="2"
    viewBox="0 0 24 24"
    stroke="currentColor"
    fill="none"
  >
    <path
      d="m19,21H5c-1.1,0-2-.9-2-2V5c0-1.1.9-2,2-2h11l5,5v11c0,1.1-.9,2-2,2Z"
      stroke-linejoin="round"
      stroke-linecap="round"
      data-path="box"
    ></path>
    <path
      d="M7 3L7 8L15 8"
      stroke-linejoin="round"
      stroke-linecap="round"
      data-path="line-top"
    ></path>
    <path
      d="M17 20L17 13L7 13L7 20"
      stroke-linejoin="round"
      stroke-linecap="round"
      data-path="line-bottom"
    ></path>
  </svg> <span class="text"> Guardar Cambios</span>
</button>


        </div>

      </form>
    </div>
  </div>
</div>
